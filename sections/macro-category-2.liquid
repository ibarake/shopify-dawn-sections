{% style %}
  .section-macro-2{
    margin: 30px 0 30px 0;
  }
  .section-container-2{
    height: 400px;
    display: flex;
    flex-direction: row;
  }
  .section-container-2 .left{
    width:30%;
    background-color: #F3EFEA;
  }
  .section-container-2 .right{
    width: 70%;
    background-color: #D3D3D3;
    background-position: center center;
    background-repeat: norepeat;
    background-size: cover;
  }
  .bolded-h{
    line-height: 32px;
  }
  .section-bottom-2{
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: space-around;
  }
  .section-bottom-2 .column{
    margin: 10px;
  }
  .image-col img{
    height: 305px;
    width: 305px;
    object-fit: cover;
  }
{% endstyle %}


{% assign macrocategory = page.metafields.custom.reference.value %}
{% assign subcategories = macrocategory.subcategories %}


<div class="page-width">
    <div class="section-macro-2">

      {% for subcategory in subcategories.value %}
        {% if forloop.index == section.settings.subid %}
          {% assign subcategoriescollections = subcategory.collections %}
          {% assign subcategoriespage = subcategory.page.value %}
          {% assign subimageurl = subcategory.image | image_url %}
          
          <div class="section-container-2">
            <div class="left">
              <p class="bolded-h2">
                <strong>{{ subcategory.macro_section_title }}</strong>
              </p>
              <div class="link-shop">
              <a href="#">
                <p>Shop all {{ subcategory.title }}</p>
              </a>
            </div>    
            </div>
            <div class="right" style="background-image: url('{{ subimageurl }}')"><div></div></div>
          </div>

          <div class="section-bottom-2">
      
          {% for collection in subcategoriescollections.value %}
            <div class="column">
              <div class="image-col">
                <img src="{{ collection.image | image_url }}" alt="sub image">
              </div>
              <a href="#">
                <p>{{ collection.title }}</p>
              </a>
            </div>
          {% endfor %}

          </div>
        {% endif %}
      {% endfor %}
    
  </div>
</div>


{% schema %}
  {
  "name": "Custom macrocategory 2",
  "settings": [
    {
      "type": "number",
      "id": "subid",
      "label": "id for sub of the macro you want to use for the section",
      "default": 1
    },
    {
      "type": "number",
      "id": "colnum",
      "label": "# columns under section",
      "default": 3
    },
    {
      "type": "number",
      "id": "colid",
      "label": "id for collection of the sub you want to use for the section",
      "default": 1
    },
    {
      "type": "text",
      "id": "x-text",
      "label": "button text",
      "default": "shop all bedrooms"
    },
    {
     "type": "text",
      "id": "x-heading",
      "label": "heading text",
      "default": "restful nights, <br> every night"
    }
  ],
  "blocks": [

  ],
  "presets": [
    {
      "category": "macro-category-2",
      "name": "Custom macrocategory 2 section Ashley"
    }
  ]
}
{% endschema %}